<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Bootstrap</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        // Configuración de las fechas al cargar la página
        window.onload = function () {
            const fechaInput = document.getElementById("fecha");
            const hoy = new Date();
            const maxDate = new Date();
            maxDate.setDate(hoy.getDate() + 15);

            // Formato YYYY-MM-DD para el atributo min y max
            const formatoFecha = (fecha) => fecha.toISOString().split("T")[0];
            fechaInput.min = formatoFecha(hoy);
            fechaInput.max = formatoFecha(maxDate);
        };






    </script>
</head>

<body>
    <div class="container mt-4">
        <h2 class="text-center mb-4">Formulario</h2>


        <form action="/add" method="post">
            <!-- Primera fila -->
            <div class="row mb-3">
                <div class="col-md-3">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="nombre" placeholder="Ejemplo Luis Gonzales">
                </div>
                <div class="col-md-3">
                    <label for="telefono" class="form-label">Teléfono</label>
                    <input type="tel" class="form-control" id="telefono" placeholder="Ingresa tu teléfono">
                </div>
                <div class="col-md-2">
                    <label for="correo" class="form-label">Correo</label>
                    <input type="email" class="form-control" id="correo" placeholder="Ingresa tu correo">
                </div>
                <div class="col-md-2">
                    <label for="fecha" class="form-label">Fecha</label>
                    <input type="date" class="form-control" id="fecha1">
                </div>
                <div class="col-md-2">
                    <label for="direccion" class="form-label">Ced/pass</label>
                    <input type="text" class="form-control" id="direccion" placeholder="cedula o pasaporte">
                </div>

            </div>

            <!-- Segunda fila -->
            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="fecha" class="form-label">Fecha</label>
                    <input type="date" class="form-control" id="fecha">
                </div>
                <div class="col-md-4">
                    <label for="direccion" class="form-label">Dirección</label>
                    <input type="text" class="form-control" id="direccion" placeholder="Ingresa tu dirección">
                </div>

                <div class="col-md-4">
                    <label for="nivel" class="form-label">Nivel</label>
                    <select class="form-select" id="nivel" aria-label="Default select example">
                        <option selected>Selecciona un nivel</option>
                        <option value="alto">revisar</option>
                        <option value="medio">revisado</option>
                        <option value="bajo">retirado</option>
                    </select>
                </div>



            </div>

            <div class="row mb-3">
                <div class="mb-3">
                    <label for="exampleFormControlTextarea1" class="form-label">Nota importante </label>
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                        placeholder="agregar alguna nota de precaucuion sobre el cliente"></textarea>
                </div>

            </div>




            <!-- Botón de enviar -->
            <div class="form-group mt-4 d-grid gap-2">
                <button class="btn btn-success"> Crear</button>
            </div>
        </form>
    </div>


    <!-- JavaScript -->
    <script>
        const telefonoInput = document.getElementById('telefono');

        telefonoInput.addEventListener('input', function (e) {
            let input = e.target.value;
            // Eliminar todo lo que no sea dígito
            input = input.replace(/\D/g, '');

            // Formatear el número
            // Aplicar el formato "1234-5678"
            // Aplicar formato solo si tiene exactamente 8 dígitos


            // Aplicar formato solo si tiene exactamente 8 dígitos
            if (input.length === 8) {
                input = `${input.slice(0, 4)}-${input.slice(4, 8)}`;
            }

            // Establecer el valor formateado
            e.target.value = input;
        });





        /*         // Obtener el valor del teléfono
                let telefono = telefonoInput.value;
        
                // Eliminar formato (guiones, espacios, etc.)
                let telefonoSinFormato = telefono.replace(/\D/g, '');
        
                // Aquí puedes enviar el valor sin formato a tu servidor para almacenarlo en la base de datos
                console.log('Teléfono para guardar:', telefonoSinFormato);
        
                // Por ejemplo, haciendo una solicitud AJAX al servidor (suponiendo que estés usando Node.js o PHP)
                // fetch('/guardarTelefono', {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json',
                //     },
                //     body: JSON.stringify({ telefono: telefonoSinFormato })
                // }).then(response => response.json()).then(data => console.log(data)); */


        // muestra la fecha actual

        window.onload = function () {
            const fechaInput = document.getElementById("fecha1");
            const hoy = new Date();
            fechaInput.value = hoy.toISOString().split('T')[0];
        };



        // ejemplo de formatear la fecha para guardar mysql tipo date
        const hoy = new Date();
        const año = hoy.getFullYear();
        const mes = String(hoy.getMonth() + 1).padStart(2, '0'); // Mes en formato 2 dígitos
        const día = String(hoy.getDate()).padStart(2, '0');      // Día en formato 2 dígitos
        const fechaFormateada = `${año}-${mes}-${día}`;
        console.log(fechaFormateada); // Ejemplo: "2024-12-23"

        /*         // Insertar la fecha
        const sql = 'INSERT INTO tabla (fecha) VALUES (?)';
        conexion.execute(sql, [fechaFormateada], (err, results) => {
          if (err) {
            console.error('Error al insertar la fecha:', err);
          } else {
            console.log('Fecha insertada correctamente:', results);
          }
          conexion.end();
        }); */


    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>








<script>
    document.getElementById("miFormulario").addEventListener("submit", (event) => {
        event.preventDefault(); // Detiene el envío automático del formulario

        // Variables para los campos
        const nombre = document.getElementById("nombre").value.trim();
        const telefono = document.getElementById("telefono").value.trim();

        // Variables para los elementos de error
        const errorNombre = document.getElementById("error-nombre");
        const errorTelefono = document.getElementById("error-telefono");

        // Limpiar mensajes de error
        errorNombre.textContent = "";
        errorTelefono.textContent = "";

        let esValido = true; // Bandera para validar el formulario

        // Validar campo "Nombre"
        if (nombre === "") {
            errorNombre.textContent = "El nombre es obligatorio.";
            esValido = false;
        } else if (nombre.length < 3) {
            errorNombre.textContent = "El nombre debe tener al menos 3 caracteres.";
            esValido = false;
        }

        // Validar campo "Teléfono"
        const telefonoSinGuiones = telefono.replace(/-/g, ""); // Eliminar guiones
        if (!/^\d{8,15}$/.test(telefonoSinGuiones)) {
            errorTelefono.textContent = "El teléfono debe contener entre 8 y 15 dígitos sin caracteres especiales.";
            esValido = false;
        }

        // Si el formulario es válido, procesar y enviar
        if (esValido) {
            // Actualizar los valores procesados en el formulario
            document.getElementById("nombre").value = nombre;
            document.getElementById("telefono").value = telefonoSinGuiones;

            // Enviar el formulario automáticamente
            event.target.submit();
        }
    });
</script>







</html>